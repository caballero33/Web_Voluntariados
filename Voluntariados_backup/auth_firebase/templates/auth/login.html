{% extends "base.html" %}

{% block title %}Iniciar Sesión{% endblock %}

{% block content %}
<div class="columns is-centered">
    <div class="column is-half">
        <div class="box-content">
            <div class="has-text-centered mb-6">
                <h1 class="title is-2 has-text-primary">
                    <i class="fas fa-sign-in-alt mr-3"></i>Iniciar Sesión
                </h1>
                <p class="subtitle has-text-white">Accede a tu espacio de voluntariado</p>
            </div>

            <form id="login-form" class="box">
                <div class="field">
                    <label class="label">Correo Electrónico</label>
                    <div class="control has-icons-left">
                        <input class="input" type="email" id="login-email" placeholder="tu@email.com" required>
                        <span class="icon is-small is-left">
                            <i class="fas fa-envelope"></i>
                        </span>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Contraseña</label>
                    <div class="control has-icons-left">
                        <input class="input" type="password" id="login-password" placeholder="Tu contraseña" required>
                        <span class="icon is-small is-left">
                            <i class="fas fa-lock"></i>
                        </span>
                    </div>
                </div>

                <div class="field">
                    <label class="checkbox">
                        <input type="checkbox" id="remember-me">
                        Recordarme
                    </label>
                </div>

                <div class="field">
                    <div class="control">
                        <button class="button is-primary is-fullwidth" type="submit">
                            <span class="icon">
                                <i class="fas fa-sign-in-alt"></i>
                            </span>
                            <span>Iniciar Sesión</span>
                        </button>
                    </div>
                </div>

                <div class="has-text-centered">
                    <p>¿No tienes una cuenta? <a href="{% url 'auth:register' %}" class="has-text-primary">Regístrate aquí</a></p>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('login-form');
    
    loginForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        
        try {
            await window.authManager.signIn(email, password);
            // Redirect to dashboard after successful login
            window.location.href = "{% url 'auth:dashboard' %}";
        } catch (error) {
            console.error('Login error:', error);
        }
    });
});
</script>
{% endblock %}
